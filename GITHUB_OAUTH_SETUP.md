# GitHub OAuth Setup Guide

## Issue Resolution: AccessDenied Error

The `AccessDenied` error you're experiencing is typically caused by incorrect GitHub OAuth configuration. Here's how to fix it:

## 1. GitHub OAuth App Configuration

### Step 1: Update GitHub OAuth App Settings

Go to your GitHub OAuth app settings at:
`https://github.com/settings/applications/{your-app-id}`

**Set these values:**

- **Application name**: SoftwarePros Authentication
- **Homepage URL**: `https://www.softwarepros.org`
- **Authorization callback URL**: `https://www.softwarepros.org/api/auth/callback/github`

### Step 2: Verify Client Credentials

Your current credentials are:
- **Client ID**: `Ov23liG3Da9UqJhj2tyW`
- **Client Secret**: `7fe400de8965f317e12b1ec6d264a2c1248e2550`

## 2. Environment Variables Fixed

✅ **Fixed Issues:**
- Added missing `GITHUB_CLIENT_ID` and `GITHUB_CLIENT_SECRET` to `.env`
- Fixed `NEXTAUTH_URL` from `https://softwarepros.org` to `https://www.softwarepros.org`
- Created missing `/auth/error` page
- Created missing `/auth/verify-request` page

## 3. Callback URL Explanation

The **Authorization callback URL** in GitHub must exactly match:
```
https://www.softwarepros.org/api/auth/callback/github
```

This URL is automatically generated by NextAuth.js using the pattern:
```
{NEXTAUTH_URL}/api/auth/callback/{provider}
```

## 4. Common Issues and Solutions

### Issue: "AccessDenied" Error
- **Cause**: Callback URL mismatch or missing environment variables
- **Solution**: Ensure GitHub app callback URL matches exactly

### Issue: "OAuthSignin" Error
- **Cause**: Invalid client credentials
- **Solution**: Verify Client ID and Secret in both GitHub and `.env`

### Issue: "OAuthCallback" Error
- **Cause**: Network issues or GitHub service problems
- **Solution**: Retry after a few minutes

### Issue: "OAuthAccountNotLinked" Error
- **Cause**: User tries to sign in with GitHub but email already exists with password
- **Solution**: User should sign in with email/password first, then link GitHub account

## 5. Testing the Fix

1. **Deploy the updated environment variables** to your production server
2. **Restart your application** to load new environment variables
3. **Test GitHub OAuth** by visiting: `https://www.softwarepros.org/auth/signin`
4. **Click "Continue with GitHub"** button

## 6. Deployment Checklist

For production deployment, ensure these environment variables are set:

```bash
NEXTAUTH_SECRET="huPUll2rosZChFwVYQgdBO3vIA0gsOHQGkgqDPsjJeU="
NEXTAUTH_URL="https://www.softwarepros.org"
GITHUB_CLIENT_ID="Ov23liG3Da9UqJhj2tyW"
GITHUB_CLIENT_SECRET="7fe400de8965f317e12b1ec6d264a2c1248e2550"
DATABASE_URL="your-database-connection-string"
```

## 7. Security Notes

- ✅ Environment variables are properly configured
- ✅ GitHub client secret is set in environment (not in code)
- ✅ Callback URL uses HTTPS
- ✅ NextAuth secret is properly generated

## 8. Debug Information

If issues persist, check these logs:
- Browser Network tab for failed requests
- Server logs for NextAuth errors
- GitHub OAuth app activity logs

The error pages are now properly implemented at:
- `/auth/error` - Handles all authentication errors with user-friendly messages
- `/auth/verify-request` - Handles email verification requests